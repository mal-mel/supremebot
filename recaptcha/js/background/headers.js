chrome.webRequest.onHeadersReceived.addListener(function(details){for(var i=0;i<details.responseHeaders.length;++i){if(details.responseHeaders[i].name.toLowerCase()==="content-security-policy"){details.responseHeaders.splice(i,1);break}}for(var i=0;i<details.responseHeaders.length;++i){if(details.responseHeaders[i].name.toLowerCase()==="x-content-security-policy"){details.responseHeaders.splice(i,1);break}}return{responseHeaders:details.responseHeaders}},{urls:["<all_urls>"]},["blocking","responseHeaders"]);chrome.webRequest.onCompleted.addListener(function(details){if(typeof globalStatus==="undefined"||typeof globalStatus.solve_funcaptcha==="undefined"||!globalStatus.solve_funcaptcha){return}if(details.tabId>0){chrome.tabs.executeScript(details.tabId,{frameId:details.frameId,file:"/js/content_script/earlier_injection.js",runAt:"document_start",allFrames:true})}},{urls:["http://*/*","https://*/*"],types:["main_frame","sub_frame"]});chrome.webRequest.onHeadersReceived.addListener(function(details){if(typeof globalStatus==="undefined"||typeof globalStatus.solve_funcaptcha==="undefined"||!globalStatus.solve_funcaptcha){return}if(typeof URLSearchParams==="function"){var originalFuncaptchaApiUrl=details.url;var parsedFuncaptchaApiUrl=parseUrl(originalFuncaptchaApiUrl);var funcaptchaApiUrlParams=new URLSearchParams(parsedFuncaptchaApiUrl.search);var originalOnloadMethodName=funcaptchaApiUrlParams.get("onload");var currentOnloadMethodName;var currentFuncaptchaApiUrl;if(!originalOnloadMethodName&&originalOnloadMethodName!=="_funcaptchaOnloadMethod"){currentOnloadMethodName="_funcaptchaOnloadMethod";funcaptchaApiUrlParams.set("onload","_funcaptchaOnloadMethod");parsedFuncaptchaApiUrl.search=funcaptchaApiUrlParams.toString();currentFuncaptchaApiUrl=parsedFuncaptchaApiUrl.toString()}else{currentFuncaptchaApiUrl=originalFuncaptchaApiUrl;currentOnloadMethodName=originalOnloadMethodName}if(details.tabId){chrome.tabs.sendMessage(details.tabId,{type:"funcaptchaApiScriptRequested",originalFuncaptchaApiUrl:originalFuncaptchaApiUrl,originalOnloadMethodName:originalOnloadMethodName,currentFuncaptchaApiUrl:currentFuncaptchaApiUrl,currentOnloadMethodName:currentOnloadMethodName},{frameId:details.frameId},function(){})}return}},{urls:["https://funcaptcha.com/fc/api/*","https://*.funcaptcha.com/fc/api/*","https://arkoselabs.com/fc/api/*","https://*.arkoselabs.com/fc/api/*"]});