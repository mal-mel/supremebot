var RepresentativeMarker=function(type,removeCallback){var markInputSolverMessage=chrome.i18n.getMessage("markInputSolverMessage");var defaultSolverMessage="AntiCaptcha";var options={};return new function(type,removeCallback){var $representativeMarker,oldSelectorElement,selectorElement;if(["image","input"].indexOf(type)==-1){return}this.show=function(selector){if(!$representativeMarker){var mark=document.createElement("a");mark.className="mark_cancel_link "+type;mark.id="mark_cancel_link_"+type;mark.title=chrome.i18n.getMessage("appShortName")+": "+(type=="image"?chrome.i18n.getMessage("unmarkImageTitle"):chrome.i18n.getMessage("unmarkInputTitle"));mark.tabIndex=0;if(type=="image"){mark.innerHTML='<span class="face"></span><div class="antigate_solver image">'+markInputSolverMessage+"</div>"}else{mark.innerHTML="<span></span>"}var actionReaction=this.remove.bind(null,removeCallback);mark.onclick=actionReaction;mark.onkeypress=function(e){if(e.code.toLowerCase()=="space"||e.code.toLowerCase()=="enter"){actionReaction(e,true)}};$representativeMarker=$(mark)}selectorElement=$(selector).length?$(selector)[0]:null;if(selectorElement&&(!oldSelectorElement||selectorElement!=oldSelectorElement)){$representativeMarker.remove();$(selectorElement).after($representativeMarker);oldSelectorElement=selectorElement}};this.remove=function(removeCallback,event,usingKeyboard){if(!event.isTrusted){return}if($representativeMarker){$representativeMarker.remove();if(usingKeyboard&&selectorElement){if(selectorElement.tagName.toLowerCase()=="img"){var lastTabIndex=selectorElement.tabIndex;selectorElement.tabIndex=0;selectorElement.focus();selectorElement.tabIndex=lastTabIndex}else{selectorElement.focus()}}}oldSelectorElement=null;removeCallback()};this.hide=function(){if($representativeMarker){$representativeMarker.remove();oldSelectorElement=null}};this.activate=function(){if($representativeMarker){$representativeMarker.addClass("active");if(type=="image"){var $antigateSolver=$representativeMarker.find(".antigate_solver.image:not(.in_process):not(.error):not(.solved)");if($antigateSolver.length&&$antigateSolver.text()!==defaultSolverMessage){$antigateSolver.text(defaultSolverMessage)}}}};this.deactivate=function(){if($representativeMarker){$representativeMarker.removeClass("active");if(type=="image"){var $antigateSolver=$representativeMarker.find(".antigate_solver.image:not(.in_process):not(.error):not(.solved)");if($antigateSolver.length&&$antigateSolver.text()!==markInputSolverMessage){$antigateSolver.text(markInputSolverMessage)}}}};this.getMarkerElement=function(){return $representativeMarker};this.setOption=function(name,value){options[name]=value}}(type,removeCallback)};